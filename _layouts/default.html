<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Preconnect to key resources -->
  <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- Preload critical fonts with high priority for LCP element -->
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Nunito:wght@700&display=swap&text=ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.,()-&font-display=swap" as="style" fetchpriority="high">
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap&text=ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.,()-&font-display=swap" as="style">
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0&display=swap&font-display=swap" as="style">
  
  <!-- Load fonts with font-display: swap -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap&text=ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.,()-&font-display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0&display=swap&font-display=swap">
  
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>{% if page.title %}{{ page.title }} | TinyRests{% else %}TinyRests - Toddler Nap Schedule Calculator{% endif %}</title>
  <!-- Comprehensive favicon setup for all platforms and search engines -->
  <link rel="apple-touch-icon" sizes="180x180" href="{{ '/assets/favicon/apple-touch-icon.png' | relative_url }}">
  <link rel="icon" type="image/png" sizes="32x32" href="{{ '/assets/favicon/favicon-32x32.png' | relative_url }}">
  <link rel="icon" type="image/png" sizes="16x16" href="{{ '/assets/favicon/favicon-16x16.png' | relative_url }}">
  <!-- Manifest is loaded later for PWA support -->
  <link rel="mask-icon" href="{{ '/assets/favicon/safari-pinned-tab.svg' | relative_url }}" color="#8b5cf6">
  <link rel="shortcut icon" href="{{ '/assets/favicon/favicon.ico' | relative_url }}">
  <meta name="msapplication-TileColor" content="#8b5cf6">
  <meta name="msapplication-config" content="{{ '/browserconfig.xml' | relative_url }}">
  <meta name="theme-color" content="#8b5cf6">
  
  <!-- Custom optimized Bootstrap CSS (33KB → 8KB) -->
  <link rel="stylesheet" href="{{ '/assets/css/bootstrap-custom.css' | relative_url }}">
  
  <!-- loadCSS helper for non-render blocking CSS loading -->
  <script>
    /* loadCSS. [c]2017 Filament Group, Inc. MIT License */
    (function(w){"use strict";if(!w.loadCSS){w.loadCSS=function(){};}
    var rp=loadCSS.relpreload={};
    rp.support=(function(){var ret;try{ret=w.document.createElement("link").relList.supports("preload")}catch(e){ret=!1;}
    return function(){return ret;};})();
    rp.bindMediaToggle=function(link){
        var finalMedia=link.media||"all";
        function enableStylesheet(){link.media=finalMedia;}
        if(link.addEventListener){link.addEventListener("load",enableStylesheet);}
        else if(link.attachEvent){link.attachEvent("onload",enableStylesheet);}
        setTimeout(function(){link.rel="stylesheet";link.media="only x";
        setTimeout(enableStylesheet,0);});};rp.poly=function(){
        if(rp.support()){return;}
        var links=w.document.getElementsByTagName("link");
        for(var i=0;i<links.length;i++){
        var link=links[i];
        if(link.rel==="preload"&&link.getAttribute("as")==="style"&&!link.getAttribute("data-loadcss")){
        link.setAttribute("data-loadcss",true);
        rp.bindMediaToggle(link);}}};if(!rp.support()){
        rp.poly();
        var run=w.setInterval(rp.poly,500);
        if(w.addEventListener){w.addEventListener("load",function(){rp.poly();w.clearInterval(run);});}
        else if(w.attachEvent){w.attachEvent("onload",function(){rp.poly();w.clearInterval(run);});}}
    if(typeof exports!=="undefined"){exports.loadCSS=loadCSS;}
    else{w.loadCSS=loadCSS;}}(typeof global!=="undefined"?global:this));
  </script>
  
  <!-- Critical CSS inline for faster page rendering -->
  <style>
    /* Prioritized LCP element styles */
    h1.title{font-family:"Nunito",sans-serif;font-weight:700;font-size:1.75rem;text-align:center;color:#1e293b;min-height:2.2rem;margin:1rem 0 1.5rem}
    html.dark-mode h1.title{color:#f1f5f9}
    h1.title:after{content:'';display:block;width:60px;height:4px;background:#8b5cf6;margin:0.5rem auto 0;border-radius:5px}
    
    /* Other critical styles */
    body{font-family:"Nunito",system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;color:#1e293b;background-color:#f8fafc}
    .container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}
    .calculator-card{background:white;border-radius:16px;box-shadow:0 10px 25px -5px rgba(0,0,0,0.05);padding:2rem;margin-bottom:3rem}
    
    /* Header styles - loaded after LCP element */
    .site-header{background-color:white;padding:1.5rem 0;box-shadow:0 2px 10px rgba(0,0,0,0.05)}
    .logo{display:flex;align-items:center}
    .logo-link{display:flex;align-items:center;text-decoration:none;color:#1e293b}
    .logo-text{font-size:1.8rem;font-weight:800}
    .tagline{font-weight:500;color:#64748b}
    
    /* Mobile styles - loaded last */
    @media (max-width:576px){
      .logo-text{font-size:1.8rem !important;font-weight:800 !important}
      .header-content{flex-direction:column;text-align:center}
    }
  </style>
  
  <!-- Load CSS directly to prevent layout shifts -->
  <link rel="stylesheet" href="{{ '/assets/css/styles.css' | relative_url }}">
  <link rel="stylesheet" href="{{ '/assets/css/install-button.css' | relative_url }}">
  {% seo %}
  <link rel="canonical" href="{{ page.url | absolute_url }}">
  
  {% if page.url == "/" %}
  <!-- FAQ Schema for Rich Snippets -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "How is the nap schedule calculated?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "We calculate age-appropriate wake windows and suggest nap durations to help spread naps evenly between wake-up and bedtime. Our calculator respects your privacy and does not store any data."
        }
      },
      {
        "@type": "Question",
        "name": "What is a wake window?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "A wake window is the period a child can be awake before needing to sleep again. It helps avoid overtiredness and supports better sleep. The calculator automatically suggests appropriate wake windows based on your child's age."
        }
      },
      {
        "@type": "Question",
        "name": "Do all babies follow the same schedule?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "No, every baby is different. Our calculator gives general guidance, but it's okay to adjust based on your child's behavior and needs."
        }
      },
      {
        "@type": "Question",
        "name": "Can I use this calculator daily?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes! You can use it every day, especially when your toddler's sleep patterns are changing or if you want to try a new schedule. TinyRests is accessible anytime."
        }
      },
      {
        "@type": "Question",
        "name": "What if my baby wakes up earlier than planned?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "It's common. You can adjust the schedule by shortening the wake window slightly, or shift the entire schedule accordingly."
        }
      },
      {
        "@type": "Question",
        "name": "How do I transition my child from two naps to one?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Gradually shift to a later morning nap, extending the first wake window. When your child can comfortably stay awake for about 5 hours, they may be ready for one nap. The transition usually happens between 15-18 months."
        }
      },
      {
        "@type": "Question",
        "name": "Why is my toddler fighting naps?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "This could be due to several factors: inappropriate timing (too early or late), developmental milestones, separation anxiety, or readiness to drop a nap. Try adjusting wake windows using our calculator."
        }
      },
      {
        "@type": "Question",
        "name": "How long should my baby's naps be?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Ideally, naps should be at least 45 minutes to complete one sleep cycle. For babies 4+ months, aim for 1-2 hour naps. Younger babies may have shorter, more frequent naps."
        }
      },
      {
        "@type": "Question",
        "name": "Should I wake my baby from a nap?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Generally, it's best to let babies wake naturally. However, if long naps interfere with bedtime or other naps, it might be reasonable to wake them. Our calculator helps balance nap duration with overall sleep needs."
        }
      },
      {
        "@type": "Question",
        "name": "Does the calculator account for night sleep?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "The calculator focuses on daytime nap scheduling, using wake-up time and bedtime as anchors. Most children need 10-12 hours of night sleep, which this schedule helps support by preventing overtiredness during the day."
        }
      }
    ]
  }
  </script>
  {% endif %}
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{% if page.title %}{{ page.title }} | TinyRests{% else %}TinyRests - Toddler Nap Schedule Calculator{% endif %}">
  <meta name="twitter:description" content="{% if page.description %}{{ page.description }}{% else %}Perfect rest times for tiny humans - free calculator for optimal toddler nap schedules based on age and wake windows.{% endif %}">
  <meta name="twitter:image" content="{{ '/assets/img/og-image.jpg' | absolute_url }}">
  <!-- Open Graph Meta Tags for better sharing -->
  <meta property="og:title" content="{% if page.title %}{{ page.title }} | TinyRests{% else %}TinyRests - Toddler Nap Schedule Calculator{% endif %}">
  <meta property="og:description" content="{% if page.description %}{{ page.description }}{% else %}Perfect rest times for tiny humans - free calculator for optimal toddler nap schedules based on age and wake windows.{% endif %}">
  <meta property="og:image" content="{{ '/assets/img/og-image.jpg' | absolute_url }}">
  <meta property="og:url" content="{{ page.url | absolute_url }}">
  <meta property="og:type" content="website">
  <!-- PWA Support -->
  <link rel="manifest" href="{{ '/manifest.webmanifest' | relative_url }}">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="TinyRests">
  <meta name="theme-color" content="#3b82f6">
  <link rel="prerender" href="/">
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <div class="container">
      <div class="header-content">
        <div class="logo">
          <a href="{{ '/' | relative_url }}" class="logo-link">
            <span class="logo-icon custom-zzz">
              <svg viewBox="0 0 100 100" width="28" height="28">
                <circle cx="50" cy="50" r="45" fill="var(--primary)" />
                <path d="M20,50 a30,30 0 0 1 60,0" fill="none" stroke="white" stroke-width="5" stroke-linecap="round" />
                <path d="M30,50 a20,20 0 0 1 40,0" fill="none" stroke="white" stroke-width="5" stroke-linecap="round" />
                <path d="M40,50 a10,10 0 0 1 20,0" fill="none" stroke="white" stroke-width="5" stroke-linecap="round" />
              </svg>
            </span>
            <span class="logo-text">TinyRests</span>
          </a>
        </div>
        <div class="tagline">Perfect rest times for tiny humans</div>
        <div class="theme-toggle">
          <span class="mode-icon light-icon">☀️</span>
          <label class="switch">
            <input type="checkbox" id="darkModeToggle">
            <span class="slider round"></span>
          </label>
          <span class="mode-icon dark-icon">🌙</span>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="container main-content">
    {{ content }}
  </main>

  <!-- Footer -->
  <footer class="text-center text-muted py-4 site-footer">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-md-5 mb-3 mb-md-0">
          <div class="privacy-notice">This calculator is free and private — no data is collected or stored.</div>
          <div class="footer-links mt-2">
            <a href="{{ '/privacy.html' | relative_url }}" class="footer-link">Privacy</a>
            <a href="{{ '/terms.html' | relative_url }}" class="footer-link">Terms</a>
            <a href="mailto:salmorejo2024@outlook.com" class="footer-link">Contact</a>
          </div>
        </div>
        
        <!-- Install App Button -->
        <div id="installContainer" class="col-md-2 text-center">
          <button id="installApp" class="install-app-btn btn btn-outline-primary" style="display: none;">
            <span class="install-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
              </svg>
            </span>
            Install
          </button>
        </div>
        
        <div class="col-md-5">
          <div class="footer-tagline">Made with 💜 for tired parents</div>
          <div class="copyright">© 2025 TinyRests</div>
        </div>
      </div>
    </div>
  </footer>

  <!-- JavaScript with defer attribute for non-blocking loading -->
  <script src="{{ '/assets/js/bootstrap-minimal.js' | relative_url }}" defer></script>
  <script src="{{ '/assets/js/script.js' | relative_url }}" defer></script>
  <script src="{{ '/assets/js/install.js' | relative_url }}" defer></script>
  
  <!-- Service Worker Registration with defer -->
  <script defer>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('{{ "/service-worker.js" | relative_url }}').then(registration => {
          console.log('ServiceWorker registration successful with scope: ', registration.scope);
        }).catch(err => {
          console.log('ServiceWorker registration failed: ', err);
        });
      });
    }
  </script>
  
  <!-- Google Analytics (moved to end of body for faster page load) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-J3YBQMC1PM"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-J3YBQMC1PM', { 'send_page_view': false });
    // Delayed page view sending after page is interactive
    window.addEventListener('load', function() {
      setTimeout(function() {
        gtag('event', 'page_view');
      }, 100);
    });
  </script>
  
  <!-- Dark Mode Script -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const darkModeToggle = document.getElementById('darkModeToggle');
      const htmlElement = document.documentElement;
      
      // Check for saved theme preference or use device preference
      const savedTheme = localStorage.getItem('theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      
      // Set initial state
      if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
        htmlElement.classList.add('dark-mode');
        darkModeToggle.checked = true;
      }
      
      // Toggle theme on switch change
      darkModeToggle.addEventListener('change', function() {
        if (this.checked) {
          htmlElement.classList.add('dark-mode');
          localStorage.setItem('theme', 'dark');
        } else {
          htmlElement.classList.remove('dark-mode');
          localStorage.setItem('theme', 'light');
        }
      });
    });
  </script>
</body>
</html>
